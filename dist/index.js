"use strict";$(document).ready(function(){var o=document.querySelectorAll("#menu__item");document.querySelector(".menu").addEventListener("click",function(e){for(var t=0;t<o.length;t++)o[t].classList.remove("menu__item--active")});for(var e=function(n){o[n].addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),o[n].classList.contains("menu__item--active"))o[n].classList.remove("menu__item--active");else{for(var t=0;t<o.length;t++)o[t].classList.remove("menu__item--active");o[n].classList.add("menu__item--active")}})},t=0;t<o.length;t++)e(t);var n=document.querySelector(".scrollarrow--left"),a=document.querySelector(".scrollarrow--right"),i=document.querySelector(".slider__list"),r=(document.querySelectorAll(".slider__item"),getComputedStyle(i));a.addEventListener("click",function(e){e.preventDefault();var t=parseInt(r.left);i.style.left=-1880<t?t-940+"px":t+3760+"px"}),n.addEventListener("click",function(e){e.preventDefault();var t=parseInt(r.left);i.style.left=t<1880?t+940+"px":t-3760+"px"});function c(e,t){e.eq(t).addClass("active").siblings().removeClass("active")}function l(e){if(!d){d=!0;var t=function(e){return"".concat(-100*e,"%")}(e);c(m,e),c($(".fixed-menu__item"),e),u.css({transform:"translateY(".concat(t,")")}),setTimeout(function(){d=!1},1300)}}function s(e){var t=m.filter(".active"),n=t.next(),o=t.prev();$("fixed-menu").midnight(),"next"===e&&n.length&&l(n.index()),"prev"===e&&o.length&&l(o.index())}var m=$(".section"),u=$(".maincontent"),d=!1,v=new MobileDetect(window.navigator.userAgent).mobile();$(document).on({wheel:function(e){var t=e.originalEvent.deltaY;t<0&&s("prev"),0<t&&s("next")},keydown:function(e){var t=e.target.tagName.toLowerCase();if(!("input"===t||"textarea"===t))switch(e.keyCode){case 40:s("next");break;case 38:s("prev")}}}),$("[data-scroll-to]").on("click",function(e){e.preventDefault(),l(parseInt($(e.currentTarget).attr("data-scroll-to")))}),v&&(window.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),$("body").swipe({swipe:function(e,t){var n;"up"===t&&(n="next"),"down"===t&&(n="prev"),s(n)}}));var f=document.querySelectorAll(".team__item");document.querySelector(".team__people").addEventListener("click",function(e){e.preventDefault();for(var t=0;t<f.length;t++)f[t].classList.remove("team__item--active")});var p=function(n){f[n].addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),f[n].classList.contains("team__item--active"))f[n].classList.remove("team__item--active");else{for(var t=0;t<f.length;t++)f[t].classList.remove("team__item--active");f[n].classList.add("team__item--active")}})};for(t=0;t<f.length;t++)p(t);var y=document.querySelector("#menulink"),g=document.querySelector("#fullscreen");y.addEventListener("click",function(){fullscreen.style.right="0"}),$(".hamburger__link").on("click",function(e){fullscreen.style.right="-100%"}),document.querySelector("#exit").addEventListener("click",function(e){e.preventDefault(),g.style.right="-100%"});var k=document.querySelector(".reviews"),_=document.querySelector(".overlay"),h=document.querySelector(".overlay__text");k.addEventListener("click",function(e){var t=e.target;if("BUTTON"===t.tagName){var n=t.previousElementSibling.previousElementSibling.innerHTML+t.previousElementSibling.innerHTML;h.innerHTML=n,_.style.display="block",document.body.style.overflow="hidden"}document.addEventListener("keyup",function(e){"Escape"===e.key&&(_.style.display="none",document.body.style.overflow="inherit")}),document.querySelector(".overlay__exit").addEventListener("click",function(e){e.preventDefault(),_.style.display="none",document.body.style.overflow="inherit"})});var L=document.querySelector(".form__elem"),w=document.querySelector(".btn--send");function S(e){return e.nextElementSibling.textContent=e.validationMessage,e.checkValidity()}L.addEventListener("keydown",function(e){if("phone"==e.target.name||"apartment"==e.target.name||"floor"==e.target.name){var t=!1,n=!1;(0<=e.key||e.key<=9)&&(t=!0),"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Backspace"!=e.key||(n=!0),t||n||e.preventDefault()}}),w.addEventListener("click",function(e){if(e.preventDefault(),function(){var e=!0;S(L.elements.name)||(e=!1);S(L.elements.phone)||(e=!1);S(L.elements.comment)||(e=!1);return e}()){L.elements.apartment.value,L.elements.building.value,L.elements.comment.value,L.elements.floor.value,L.elements.home.value,L.elements.name.value,L.elements.phone.value,L.elements.question1.checked,L.elements.question2.checked,L.elements.question3.checked,L.elements.street.value;var t=new FormData(L);t.append("name",L.elements.name.value),t.append("phone",L.elements.phone.value),t.append("comment",L.elements.comment.value),t.append("to","gi.32@gmail.com");var n=new XMLHttpRequest;n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.send(t),n.responseType="json",n.addEventListener("load",function(){if(n.response.status){var t=document.querySelector(".overlay--modal");t.style.display="block",document.body.style.overflow="hidden",document.querySelector(".overlay__text--modal").innerHTML="Заказ отправлен",L.reset(),document.addEventListener("keyup",function(e){"Escape"===e.key&&(t.style.display="none")}),document.querySelector(".overlay__exit--modal").addEventListener("click",function(e){e.preventDefault(),t.style.display="none",document.body.style.overflow="inherit"})}})}}),ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.93543728,30.32056584],zoom:12,controls:["zoomControl"],behaviors:["drag"]});myGeoObjects=[],myGeoObjects[0]=new ymaps.Placemark([59.97801011,30.3113368],{},{iconLayout:"default#image",iconImageHref:"images/icons/map-marker.svg",iconImageSize:[46,57],iconImageOffset:[-20,-20]}),myGeoObjects[1]=new ymaps.Placemark([59.94513339,30.38312347],{},{iconLayout:"default#image",iconImageHref:"images/icons/map-marker.svg",iconImageSize:[46,57],iconImageOffset:[-20,-20]}),myGeoObjects[2]=new ymaps.Placemark([59.92042544,30.49717524],{},{iconLayout:"default#image",iconImageHref:"images/icons/map-marker.svg",iconImageSize:[46,57],iconImageOffset:[-20,-40]}),myGeoObjects[3]=new ymaps.Placemark([59.88686609,30.31857879],{},{iconLayout:"default#image",iconImageHref:"images/icons/map-marker.svg",iconImageSize:[46,57],iconImageOffset:[-20,-40]});var t=new ymaps.Clusterer({clusterDisableClickZoom:!0});t.add(myGeoObjects),e.geoObjects.add(t)}),video=document.querySelector(".player"),progress=document.querySelector(".bar");var b=!1;$(".play-pause").click(function(){b?(b=!1,video.pause()):(b=!0,video.play())}),$("#volume").on("change",function(){$(".player").prop("volume",this.value)}),$(".sound__img").click(function(e){video.muted?$(".player").prop("muted",!1):$(".player").prop("muted",!0)}),video.ontimeupdate=function(){var e=video.duration,t=video.currentTime;progress.value=100*t/e},progress.onclick=function(){var e=this.offsetWidth,t=event.offsetX;this.value=100*t/e,video.pause(),video.currentTime=video.duration*(t/e),video.play()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwicXVlcnlTZWxlY3RvciIsIm1lbnUiLCJpIiwibWVudV9faXRlbSIsImxlbmd0aCIsIl9sb29wIiwiZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwibGVmdCIsInJpZ2h0Iiwic2xpZGVyTGlzdCIsImNvbXB1dGVkIiwicXVlcnlTZWxlY3RvckFsbCIsImdldENvbXB1dGVkU3R5bGUiLCJhZGRFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJzdHlsZSIsImN1cnJlbnRMZWZ0Iiwic3dpdGNoQWN0aXZlQ2xhc3MiLCJlbGVtcyIsImVsZW1OZHgiLCJlcSIsInNldFRpbWVvdXQiLCJpbnNjcm9sbCIsInJlbW92ZUNsYXNzIiwicGVyZm9ybVRyYW5zaXRpb24iLCJzZWN0aW9uRXEiLCJzd2l0Y2hGaXhlZE1lbnVDbGFzcyIsImNvbmNhdCIsInVuQmxvY2tTY3JvbGwiLCJ0cmFuc2Zvcm0iLCJkaXNwbGF5IiwiY3NzIiwicG9zaXRpb24iLCJzY3JvbGxWaWV3cG9ydCIsImRpcmVjdGlvbiIsImFjdGl2ZVNlY3Rpb24iLCJzZWN0aW9ucyIsImZpbHRlciIsInByZXZTZWN0aW9uIiwicHJldiIsIm1pZG5pZ2h0Iiwid2hlZWwiLCJpc01vYmlsZSIsIk1vYmlsZURldGVjdCIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1vYmlsZSIsImRlbHRhWSIsIm9yaWdpbmFsRXZlbnQiLCJrZXlkb3duIiwidGFnTmFtZSIsInRhcmdldCIsInRvTG93ZXJDYXNlIiwia2V5Q29kZSIsIm9uIiwicGFyc2VJbnQiLCJjdXJyZW50VGFyZ2V0IiwiYXR0ciIsInRlYW0iLCJwYXNzaXZlIiwic3dpcGUiLCJldmVudCIsInNjcm9sbERpcmVjcmlvbiIsInRlYW1fX2l0ZW0iLCJfbG9vcDIiLCJmdWxsc2NyZWVuIiwiZXhpdCIsImhhbWJ1cmdlcl9fZnVsbHNjcmVlbiIsInBvcHVwVGV4dCIsIm92ZXJsYXkiLCJyZXZpZXdzIiwibXlGb3JtIiwiZWxlbSIsIm1vZGFsVGV4dCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJpbm5lckhUTUwiLCJib2R5Iiwib3ZlcmZsb3ciLCJrZXkiLCJzZW5kQnV0dG9uIiwiaG9tZSIsIm5hbWUiLCJ2YWxpZGF0ZUZpZWxkIiwiZmllbGQiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkxheW91dCIsInF1ZXN0aW9uMiIsInF1ZXN0aW9uMyIsInN0cmVldCIsImlzQ29udHJvbCIsImZvcm1EYXRhIiwieGhyIiwibXlHZW9PYmplY3RzIiwiaWNvbkltYWdlU2l6ZSIsImljb25JbWFnZU9mZnNldCIsInZhbGlkIiwiZWxlbWVudHMiLCJhcGFydG1lbnQiLCJ2YWx1ZSIsImJ1aWxkaW5nIiwiY29tbWVudCIsIm92ZXJsYXlGb3JtIiwicGhvbmUiLCJvdmVybGF5RXhpdCIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2VuZCIsInJlc3BvbnNlIiwic3RhdHVzIiwicmVzZXQiLCJ5bWFwcyIsImNsdXN0ZXJlciIsIm15TWFwIiwiem9vbSIsImNvbnRyb2xzIiwiYmVoYXZpb3JzIiwicHJvZ3Jlc3MiLCJQbGFjZW1hcmsiLCJpc1N0YXJ0ZWQiLCJ2aWRlbyIsIkNsdXN0ZXJlciIsImNsdXN0ZXJEaXNhYmxlQ2xpY2tab29tIiwiZ2VvT2JqZWN0cyIsInBhdXNlIiwicGxheSIsInByb3AiLCJ0aGlzIiwiY2xpY2siLCJtdXRlZCIsIm9udGltZXVwZGF0ZSIsImQiLCJkdXJhdGlvbiIsImMiLCJjdXJyZW50VGltZSIsIm9uY2xpY2siLCJ3Iiwib2Zmc2V0V2lkdGgiLCJvIiwib2Zmc2V0WCJdLCJtYXBwaW5ncyI6ImFBQUFBLEVBQUFDLFVBQUFDLE1BQUEsV0FBQUYsSUFBQUEsRUFBQUEsU0FBQUEsaUJBQUFBLGVBRUFDLFNBQUFFLGNBQUEsU0FHQUMsaUJBQUFBLFFBQUFBLFNBQUFBLEdBQ0EsSUFB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LENBQUFBLEdBQUFBLElBdENBeEIsZ0JBQUEsRUFBQSxJQUFBLE1BMENBLElBQUFtQixFQUFBLElBQUFELE1BQUFVLFVBQUEsQ0FBQUMseUJBQUEsSUFDQUwsRUFBQUEsSUFBQUEsY0FDQUosRUFBQVUsV0FBQXZILElBQUE0RyxLQUVBUSxNQUFBaEksU0FBQUUsY0FBQSxXQUNBMkgsU0FBQTdILFNBQUFFLGNBQUEsUUFFQThILElBQUFBLEdBQUFBLEVBQ0FBLEVBQUFBLGVBQUFBLE1BQUFBLFdBQ0FBLEdBbENBRCxHQUFBLEVBQ0FDLE1BQUFJLFVBa0NBTCxHQUFBLEVBQ0FDLE1BQUFLLFVBOUJBdEksRUFBQSxXQUFBOEQsR0FBQSxTQUFBLFdBQ0E5RCxFQUFBLFdBQUF1SSxLQUFBLFNBQUFDLEtBQUE5QixTQUlBMUcsRUFBQSxlQUFBeUksTUFBQSxTQUFBaEksR0FDQXdILE1BQUFTLE1BQ0ExSSxFQUFBLFdBQUF1SSxLQUFBLFNBQUEsR0FHQXZJLEVBQUEsV0FBQXVJLEtBQUEsU0FBQSxLQUlBTixNQUFBVSxhQUdBLFdBQ0EsSUFBQUMsRUFBQVgsTUFBQVksU0FDQUMsRUFBQWIsTUFBQWMsWUFDQWpCLFNBQUFwQixNQUFBLElBQUFvQyxFQUFBRixHQUxBZCxTQUFBa0IsUUFPQSxXQUNBLElBQUFDLEVBQUFULEtBQUFVLFlBQ0FDLEVBQUE5RSxNQUFBK0UsUUFDQVosS0FBQTlCLE1BQUEsSUFBQXlDLEVBQUFGLEVBQ0FoQixNQUFBSSxRQUNBSixNQUFBYyxZQUFBZCxNQUFBWSxVQUFBTSxFQUFBRixHQUNBaEIsTUFBQUsiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG5cclxubGV0IG1lbnVfX2l0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI21lbnVfX2l0ZW1cIik7XHJcbmxldCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51XCIpO1xyXG5cclxubWVudS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG5mb3IgKGxldCBpID0gMDsgaSA8IG1lbnVfX2l0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgIG1lbnVfX2l0ZW0gW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJtZW51X19pdGVtLS1hY3RpdmVcIik7XHJcbn1cclxufSlcclxuXHJcbmZvciAobGV0IGkgPSAwOyBpIDwgbWVudV9faXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgbWVudV9faXRlbVtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmIChtZW51X19pdGVtW2ldLmNsYXNzTGlzdC5jb250YWlucygnbWVudV9faXRlbS0tYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgbWVudV9faXRlbVtpXS5jbGFzc0xpc3QucmVtb3ZlKFwibWVudV9faXRlbS0tYWN0aXZlXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lbnVfX2l0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbWVudV9faXRlbVtpXS5jbGFzc0xpc3QucmVtb3ZlKCdtZW51X19pdGVtLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZW51X19pdGVtW2ldLmNsYXNzTGlzdC5hZGQoJ21lbnVfX2l0ZW0tLWFjdGl2ZScpXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbmNvbnN0IGxlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNjcm9sbGFycm93LS1sZWZ0XCIpO1xyXG5jb25zdCByaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2Nyb2xsYXJyb3ctLXJpZ2h0XCIpO1xyXG5jb25zdCBzbGlkZXJMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX2xpc3RcIik7XHJcbmNvbnN0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVyX19pdGVtXCIpO1xyXG5jb25zdCBjb21wdXRlZCA9IGdldENvbXB1dGVkU3R5bGUoc2xpZGVyTGlzdCk7XHJcblxyXG5cclxucmlnaHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGNvbXB1dGVkLmxlZnQpXHJcbiAgICAgICAgIGlmIChjdXJyZW50TGVmdCA+IC0xODgwKSB7XHJcbiAgICAgICAgc2xpZGVyTGlzdC5zdHlsZS5sZWZ0ID0gY3VycmVudExlZnQgLSA5NDAgKyBcInB4XCI7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2xpZGVyTGlzdC5zdHlsZS5sZWZ0ID0gY3VycmVudExlZnQgKyA5NDAqNCArIFwicHhcIjtcclxuICAgICAgICAgfVxyXG59KTtcclxubGVmdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBsZXQgY3VycmVudExlZnQgPSBwYXJzZUludChjb21wdXRlZC5sZWZ0KSAgIFxyXG4gICAgaWYgKGN1cnJlbnRMZWZ0IDwgMTg4MCkgIHsgICAgXHJcbiAgICBzbGlkZXJMaXN0LnN0eWxlLmxlZnQgPSBjdXJyZW50TGVmdCArIDk0MCArIFwicHhcIjsgICAgICAgIFxyXG59XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzbGlkZXJMaXN0LnN0eWxlLmxlZnQgPSBjdXJyZW50TGVmdCAtIDk0MCo0ICsgXCJweFwiO1xyXG4gICAgfVxyXG5cclxufSlcclxuXHJcbi8vINCh0LrRgNC+0LvQu1xyXG5cclxuY29uc3Qgc2VjdGlvbnMgPSAkKFwiLnNlY3Rpb25cIik7XHJcbmNvbnN0IGRpc3BsYXkgPSAkKFwiLm1haW5jb250ZW50XCIpO1xyXG5sZXQgaW5zY3JvbGwgPSBmYWxzZTtcclxuXHJcbmNvbnN0IG1vYmlsZURldGVjdCA9IG5ldyBNb2JpbGVEZXRlY3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5jb25zdCBpc01vYmlsZSA9IG1vYmlsZURldGVjdC5tb2JpbGUoKTtcclxuXHJcbmNvbnN0IGNvdW50UG9zaXRpb25QZXJjZW50ID0gc2VjdGlvbkVxID0+IHtcclxuICByZXR1cm4gYCR7c2VjdGlvbkVxICogLTEwMH0lYDtcclxufTtcclxuXHJcbmNvbnN0IHN3aXRjaEFjdGl2ZUNsYXNzID0gKGVsZW1zLCBlbGVtTmR4KSA9PiB7XHJcbiAgZWxlbXNcclxuICAgIC5lcShlbGVtTmR4KVxyXG4gICAgLmFkZENsYXNzKFwiYWN0aXZlXCIpXHJcbiAgICAuc2libGluZ3MoKVxyXG4gICAgLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG59O1xyXG5cclxuY29uc3QgdW5CbG9ja1Njcm9sbCA9ICgpID0+IHtcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGluc2Nyb2xsID0gZmFsc2U7XHJcbiAgfSwgMTMwMCk7IC8vINC/0L7QtNC+0LbQtNCw0YLRjCDQv9C+0LrQsCDQt9Cw0LLQtdGA0YjQuNGC0YHRjyDQuNC90LXRgNGG0LjRjyDQvdCwINGC0LDRh9C/0LDQtNCw0YVcclxufTtcclxuXHJcbmNvbnN0IHBlcmZvcm1UcmFuc2l0aW9uID0gc2VjdGlvbkVxID0+IHtcclxuICBpZiAoaW5zY3JvbGwpIHJldHVybjtcclxuICBpbnNjcm9sbCA9IHRydWU7XHJcblxyXG4gIGNvbnN0IHBvc2l0aW9uID0gY291bnRQb3NpdGlvblBlcmNlbnQoc2VjdGlvbkVxKTtcclxuICBjb25zdCBzd2l0Y2hGaXhlZE1lbnVDbGFzcyA9ICgpID0+XHJcbiAgICBzd2l0Y2hBY3RpdmVDbGFzcygkKFwiLmZpeGVkLW1lbnVfX2l0ZW1cIiksIHNlY3Rpb25FcSk7XHJcblxyXG4gIHN3aXRjaEFjdGl2ZUNsYXNzKHNlY3Rpb25zLCBzZWN0aW9uRXEpO1xyXG4gIHN3aXRjaEZpeGVkTWVudUNsYXNzKCk7XHJcblxyXG4gIGRpc3BsYXkuY3NzKHtcclxuICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoJHtwb3NpdGlvbn0pYFxyXG4gIH0pO1xyXG5cclxuIFxyXG5cclxuICB1bkJsb2NrU2Nyb2xsKCk7XHJcbn07XHJcblxyXG5jb25zdCBzY3JvbGxWaWV3cG9ydCA9IGRpcmVjdGlvbiA9PiB7XHJcbiAgY29uc3QgYWN0aXZlU2VjdGlvbiA9IHNlY3Rpb25zLmZpbHRlcihcIi5hY3RpdmVcIik7XHJcbiAgY29uc3QgbmV4dFNlY3Rpb24gPSBhY3RpdmVTZWN0aW9uLm5leHQoKTtcclxuICBjb25zdCBwcmV2U2VjdGlvbiA9IGFjdGl2ZVNlY3Rpb24ucHJldigpO1xyXG4gICQoJ2ZpeGVkLW1lbnUnKS5taWRuaWdodCgpXHJcblxyXG4gIGlmIChkaXJlY3Rpb24gPT09IFwibmV4dFwiICYmIG5leHRTZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgcGVyZm9ybVRyYW5zaXRpb24obmV4dFNlY3Rpb24uaW5kZXgoKSk7XHJcbiAgfVxyXG5cclxuICBpZiAoZGlyZWN0aW9uID09PSBcInByZXZcIiAmJiBwcmV2U2VjdGlvbi5sZW5ndGgpIHtcclxuICAgIHBlcmZvcm1UcmFuc2l0aW9uKHByZXZTZWN0aW9uLmluZGV4KCkpO1xyXG4gIH1cclxufTtcclxuXHJcbiQoZG9jdW1lbnQpLm9uKHtcclxuICAgIHdoZWVsOiBlID0+IHtcclxuICAgICAgY29uc3QgZGVsdGFZID0gZS5vcmlnaW5hbEV2ZW50LmRlbHRhWTtcclxuICBcclxuICAgICAgaWYgKGRlbHRhWSA8IDApIHtcclxuICAgICAgICAgIHNjcm9sbFZpZXdwb3J0KFwicHJldlwiKVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChkZWx0YVkgPiAwKSB7XHJcbiAgICAgICAgICBzY3JvbGxWaWV3cG9ydChcIm5leHRcIilcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgIH0sXHJcbiAgICBrZXlkb3duOiBlID0+IHtcclxuICAgICAgY29uc3QgdGFnTmFtZSA9IGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3QgdXNlclR5cGluZ0luSW5wdXRzID0gdGFnTmFtZSA9PT0gXCJpbnB1dFwiIHx8IHRhZ05hbWUgPT09IFwidGV4dGFyZWFcIjtcclxuICBcclxuICAgICAgaWYgKHVzZXJUeXBpbmdJbklucHV0cykgcmV0dXJuO1xyXG4gIFxyXG4gICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICBzY3JvbGxWaWV3cG9ydChcIm5leHRcIik7XHJcbiAgICAgICAgICBicmVhaztcclxuICBcclxuICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgc2Nyb2xsVmlld3BvcnQoXCJwcmV2XCIpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcblxyXG5cclxuJChcIltkYXRhLXNjcm9sbC10b11cIikub24oXCJjbGlja1wiLCBlID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgcGVyZm9ybVRyYW5zaXRpb24ocGFyc2VJbnQoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoXCJkYXRhLXNjcm9sbC10b1wiKSkpO1xyXG59KTtcclxuXHJcbi8vINGA0LDQt9GA0LXRiNCw0LXQvCDRgdCy0LDQudC/INC90LAg0LzQvtCx0LjQu9GM0L3QuNC60LDRhVxyXG5pZiAoaXNNb2JpbGUpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgIFwidG91Y2htb3ZlXCIsXHJcbiAgICBlID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSxcclxuICAgIHsgcGFzc2l2ZTogZmFsc2UgfVxyXG4gICk7XHJcblxyXG4gICQoXCJib2R5XCIpLnN3aXBlKHtcclxuICAgIHN3aXBlOiAoZXZlbnQsIGRpcmVjdGlvbikgPT4ge1xyXG4gICAgICBsZXQgc2Nyb2xsRGlyZWNyaW9uO1xyXG4gICAgICBpZiAoZGlyZWN0aW9uID09PSBcInVwXCIpIHNjcm9sbERpcmVjcmlvbiA9IFwibmV4dFwiO1xyXG4gICAgICBpZiAoZGlyZWN0aW9uID09PSBcImRvd25cIikgc2Nyb2xsRGlyZWNyaW9uID0gXCJwcmV2XCI7XHJcbiAgICAgIHNjcm9sbFZpZXdwb3J0KHNjcm9sbERpcmVjcmlvbik7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmxldCB0ZWFtX19pdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50ZWFtX19pdGVtXCIpO1xyXG5sZXQgdGVhbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVhbV9fcGVvcGxlXCIpO1xyXG5cclxuXHJcbnRlYW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVhbV9faXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRlYW1fX2l0ZW1baV0uY2xhc3NMaXN0LnJlbW92ZShcInRlYW1fX2l0ZW0tLWFjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVhbV9faXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRlYW1fX2l0ZW1baV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRlYW1fX2l0ZW1baV0uY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZWFtX19pdGVtLS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgdGVhbV9faXRlbVtpXS5jbGFzc0xpc3QucmVtb3ZlKFwidGVhbV9faXRlbS0tYWN0aXZlXCIpICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZWFtX19pdGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgIHRlYW1fX2l0ZW1baV0uY2xhc3NMaXN0LnJlbW92ZSgndGVhbV9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0ZWFtX19pdGVtW2ldLmNsYXNzTGlzdC5hZGQoJ3RlYW1fX2l0ZW0tLWFjdGl2ZScpICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcblxyXG5sZXQgaGVhZGVyX19tZW51X19saW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZW51bGlua1wiKTtcclxubGV0IGhhbWJ1cmdlcl9fZnVsbHNjcmVlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZnVsbHNjcmVlblwiKTtcclxuaGVhZGVyX19tZW51X19saW5rLmFkZEV2ZW50TGlzdGVuZXIgKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgIGZ1bGxzY3JlZW4uc3R5bGUucmlnaHQgPSAnMCcgfVxyXG4pXHJcbiQoXCIuaGFtYnVyZ2VyX19saW5rXCIpLm9uKFwiY2xpY2tcIiwgZSA9PntcclxuICBmdWxsc2NyZWVuLnN0eWxlLnJpZ2h0ID0gJy0xMDAlJ1xyXG59KVxyXG5cclxubGV0IGV4aXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2V4aXRcIik7XHJcblxyXG5leGl0LmFkZEV2ZW50TGlzdGVuZXIgKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7ICAgIFxyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaGFtYnVyZ2VyX19mdWxsc2NyZWVuLnN0eWxlLnJpZ2h0ID0gXCItMTAwJVwiO1xyXG59IClcclxuXHJcbmNvbnN0IHJldmlld3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJldmlld3NcIik7XHJcbmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIik7XHJcbmNvbnN0IHBvcHVwVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheV9fdGV4dFwiKTtcclxuXHJcblxyXG5yZXZpZXdzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlPT4ge1xyXG4gICAgbGV0IGVsZW0gPSBlLnRhcmdldDtcclxuICAgIGlmIChlbGVtLnRhZ05hbWUgPT09IFwiQlVUVE9OXCIpIHsgICAgICAgIFxyXG4gICAgICAgIHZhciBtb2RhbFRleHQgPSBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcucHJldmlvdXNFbGVtZW50U2libGluZy5pbm5lckhUTUwgKyBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJIVE1MOyAgICAgICAgIFxyXG4gICAgICAgIHBvcHVwVGV4dC5pbm5lckhUTUwgPSBtb2RhbFRleHQ7ICAgICAgICBcclxuICAgICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOyAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZSA9PiB7XHJcbiAgICAgICAgbGV0IGtleU5hbWUgPSBlLmtleTtcclxuXHJcbiAgICAgICAgaWYoa2V5TmFtZSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2luaGVyaXQnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH0pXHJcbiAgICBsZXQgb3ZlcmxheUV4aXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfX2V4aXRcIik7XHJcbiAgICBvdmVybGF5RXhpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdpbmhlcml0JztcclxuICAgIH0pXHJcbn0pO1xyXG5cclxuXHJcblxyXG5jb25zdCBteUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2VsZW1cIilcclxuY29uc3Qgc2VuZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLS1zZW5kXCIpXHJcblxyXG4gICAgXHJcbiAgICBteUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZSA9PiB7ICAgIFxyXG4gICAgaWYgKGUudGFyZ2V0Lm5hbWUgPT0gJ3Bob25lJyAgfHwgZS50YXJnZXQubmFtZSA9PSAnYXBhcnRtZW50JyB8fCBlLnRhcmdldC5uYW1lID09ICdmbG9vcicgKSB7XHJcbiAgICBsZXQgaXNEaWdpdCA9IGZhbHNlO1xyXG4gICAgbGV0IGlzRGFzaCA9IGZhbHNlO1xyXG4gICAgbGV0IGlzQ29udHJvbCA9IGZhbHNlO1xyXG5cclxuICAgIGlmIChlLmtleSA+PSAwIHx8IGUua2V5IDw9IDkpIHtcclxuICAgICAgICBpc0RpZ2l0ID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKGUua2V5ID09IFwiQXJyb3dMZWZ0XCIgfHwgZS5rZXkgPT0gXCJBcnJvd1JpZ2h0XCIgfHwgZS5rZXkgPT0gXCJCYWNrc3BhY2VcIikge1xyXG4gICAgICAgIGlzQ29udHJvbCA9IHRydWVcclxuICAgIH1cclxuICAgIGlmICghaXNEaWdpdCAmJiAhaXNDb250cm9sKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gICAgfVxyXG59KVxyXG5cclxuXHJcblxyXG5zZW5kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIgKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAodmFsaWRhdGVGb3JtKG15Rm9ybSkpIHsgICAgIFxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGFwYXJ0bWVudDogbXlGb3JtLmVsZW1lbnRzLmFwYXJ0bWVudC52YWx1ZSxcclxuICAgICAgICAgICAgYnVpbGRpbmc6IG15Rm9ybS5lbGVtZW50cy5idWlsZGluZy52YWx1ZSxcclxuICAgICAgICAgICAgY29tbWVudDogbXlGb3JtLmVsZW1lbnRzLmNvbW1lbnQudmFsdWUsXHJcbiAgICAgICAgICAgIGZsb29yOiBteUZvcm0uZWxlbWVudHMuZmxvb3IudmFsdWUsXHJcbiAgICAgICAgICAgIGhvbWU6IG15Rm9ybS5lbGVtZW50cy5ob21lLnZhbHVlLFxyXG4gICAgICAgICAgICBuYW1lOiBteUZvcm0uZWxlbWVudHMubmFtZS52YWx1ZSxcclxuICAgICAgICAgICAgcGhvbmU6IG15Rm9ybS5lbGVtZW50cy5waG9uZS52YWx1ZSxcclxuICAgICAgICAgICAgcXVlc3Rpb24xOiBteUZvcm0uZWxlbWVudHMucXVlc3Rpb24xLmNoZWNrZWQsXHJcbiAgICAgICAgICAgIHF1ZXN0aW9uMjogbXlGb3JtLmVsZW1lbnRzLnF1ZXN0aW9uMi5jaGVja2VkLFxyXG4gICAgICAgICAgICBxdWVzdGlvbjM6IG15Rm9ybS5lbGVtZW50cy5xdWVzdGlvbjMuY2hlY2tlZCxcclxuICAgICAgICAgICAgc3RyZWV0OiBteUZvcm0uZWxlbWVudHMuc3RyZWV0LnZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShteUZvcm0pO1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKFwibmFtZVwiLCBteUZvcm0uZWxlbWVudHMubmFtZS52YWx1ZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJwaG9uZVwiLCBteUZvcm0uZWxlbWVudHMucGhvbmUudmFsdWUpO1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKFwiY29tbWVudFwiLCBteUZvcm0uZWxlbWVudHMuY29tbWVudC52YWx1ZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJ0b1wiLCBcImdpLjMyQGdtYWlsLmNvbVwiKTsgXHJcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB4aHIub3BlbignUE9TVCcsICdodHRwczovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vc2VuZG1haWwnKTtcclxuICAgIHhoci5zZW5kKGZvcm1EYXRhKTsgXHJcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gXCJqc29uXCI7XHJcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICBcclxuICAgICAgICBpZiAoeGhyLnJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgb3ZlcmxheUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXktLW1vZGFsXCIpO1xyXG4gICAgICAgICAgICBvdmVybGF5Rm9ybS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgIGxldCBwb3B1cFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfX3RleHQtLW1vZGFsXCIpXHJcbiAgICAgICAgICAgIHBvcHVwVGV4dC5pbm5lckhUTUwgPSBcItCX0LDQutCw0Lcg0L7RgtC/0YDQsNCy0LvQtdC9XCI7ICAgIFxyXG4gICAgICAgICAgICBteUZvcm0ucmVzZXQoKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQga2V5TmFtZSA9IGUua2V5OyAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGtleU5hbWUgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgb3ZlcmxheUZvcm0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbGV0IG92ZXJsYXlFeGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5X19leGl0LS1tb2RhbFwiKTtcclxuICAgICAgICBvdmVybGF5RXhpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIG92ZXJsYXlGb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaW5oZXJpdCc7XHJcbiAgICAgICAgfSlcclxuICAgIH0gXHJcbiAgICB9KVxyXG4gICAgfVxyXG59KTtcclxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlRm9ybShmb3JtKSB7XHJcbiAgICAgICAgbGV0IHZhbGlkID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgICAgIGlmKCF2YWxpZGF0ZUZpZWxkKG15Rm9ybS5lbGVtZW50cy5uYW1lKSkge1xyXG4gICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmKCF2YWxpZGF0ZUZpZWxkKG15Rm9ybS5lbGVtZW50cy5waG9uZSkpIHtcclxuICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZighdmFsaWRhdGVGaWVsZChteUZvcm0uZWxlbWVudHMuY29tbWVudCkpIHtcclxuICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlRmllbGQoZmllbGQpIHtcclxuICAgICAgICBcclxuICAgICAgICAgICAgZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gZmllbGQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWVsZC5jaGVja1ZhbGlkaXR5KCk7IFxyXG4gICAgICAgIH1cclxuXHJcbiAgXHJcbiAgICB5bWFwcy5yZWFkeShpbml0KTtcclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKXsgXHJcbiAgICAgICAgICAgIHZhciBteU1hcCA9IG5ldyB5bWFwcy5NYXAoXCJtYXBcIiwge1xyXG4gICAgICAgICAgICAgICAgY2VudGVyOiBbNTkuOTM1NDM3MjgsIDMwLjMyMDU2NTg0XSxcclxuICAgICAgICAgICAgICAgIHpvb206IDEyLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbHM6IFsnem9vbUNvbnRyb2wnXSxcclxuICAgICAgICAgICAgICAgIGJlaGF2aW9yczogWydkcmFnJ11cclxuICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgICBteUdlb09iamVjdHMgPSBbXTtcclxuICAgICAgICAgICAgbXlHZW9PYmplY3RzWzBdID0gbmV3IHltYXBzLlBsYWNlbWFyayAoWzU5Ljk3ODAxMDExLCAzMC4zMTEzMzY4MF0sIHt9LCB7XHJcbiAgICAgICAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZUhyZWY6ICdpbWFnZXMvaWNvbnMvbWFwLW1hcmtlci5zdmcnLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZVNpemU6IFs0NiwgNTddLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZU9mZnNldDogWy0yMCwgLTIwXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbXlHZW9PYmplY3RzWzFdID0gbmV3IHltYXBzLlBsYWNlbWFyayAoWzU5Ljk0NTEzMzM5LCAzMC4zODMxMjM0N10sIHt9LCB7XHJcbiAgICAgICAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZUhyZWY6ICdpbWFnZXMvaWNvbnMvbWFwLW1hcmtlci5zdmcnLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZVNpemU6IFs0NiwgNTddLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZU9mZnNldDogWy0yMCwgLTIwXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbXlHZW9PYmplY3RzWzJdID0gbmV3IHltYXBzLlBsYWNlbWFyayAoWzU5LjkyMDQyNTQ0LCAzMC40OTcxNzUyNF0sIHt9LCB7XHJcbiAgICAgICAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZUhyZWY6ICdpbWFnZXMvaWNvbnMvbWFwLW1hcmtlci5zdmcnLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZVNpemU6IFs0NiwgNTddLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZU9mZnNldDogWy0yMCwgLTQwXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbXlHZW9PYmplY3RzWzNdID0gbmV3IHltYXBzLlBsYWNlbWFyayAoWzU5Ljg4Njg2NjA5LCAzMC4zMTg1Nzg3OV0sIHt9LCB7XHJcbiAgICAgICAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZUhyZWY6ICdpbWFnZXMvaWNvbnMvbWFwLW1hcmtlci5zdmcnLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZVNpemU6IFs0NiwgNTddLFxyXG4gICAgICAgICAgICAgIGljb25JbWFnZU9mZnNldDogWy0yMCwgLTQwXVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjbHVzdGVyZXIgPSBuZXcgeW1hcHMuQ2x1c3RlcmVyKHtjbHVzdGVyRGlzYWJsZUNsaWNrWm9vbTogdHJ1ZX0pXHJcbiAgICAgICAgICAgIGNsdXN0ZXJlci5hZGQobXlHZW9PYmplY3RzKTtcclxuICAgICAgICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQoY2x1c3RlcmVyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllclwiKVxyXG4gICAgICBwcm9ncmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmFyXCIpXHJcblxyXG4gICAgICB2YXIgaXNTdGFydGVkID0gZmFsc2U7IFxyXG4gICAgICAkKCcucGxheS1wYXVzZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYoIWlzU3RhcnRlZCl7IFxyXG4gICAgICAgICAgICAgIGlzU3RhcnRlZCA9IHRydWU7IFxyXG4gICAgICAgICAgICAgIHZpZGVvLnBsYXkoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaXNTdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgIH1cclxuICAgICAgfSkgICAgICBcclxuXHJcbiAgICAgICQoJyN2b2x1bWUnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCgnLnBsYXllcicpLnByb3AoXCJ2b2x1bWVcIiwgdGhpcy52YWx1ZSk7XHJcbiAgICB9KTtcclxuICAgICBcclxuICAgICAgXHJcbiAgICAgICQoJy5zb3VuZF9faW1nJykuY2xpY2sgKCBlID0+IHtcclxuICAgICAgICBpZih2aWRlby5tdXRlZCl7XHJcbiAgICAgICAgICAkKCcucGxheWVyJykucHJvcCgnbXV0ZWQnLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICAgICQoJy5wbGF5ZXInKS5wcm9wKCdtdXRlZCcsdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdmlkZW8ub250aW1ldXBkYXRlID0gcHJvZ3Jlc3NVcGRhdGU7XHJcbiAgICBwcm9ncmVzcy5vbmNsaWNrID0gdmlkZW9SZXdpbmQ7XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvZ3Jlc3NVcGRhdGUoKSB7XHJcbiAgICAgIGxldCBkID0gdmlkZW8uZHVyYXRpb247XHJcbiAgICAgIGxldCBjID0gdmlkZW8uY3VycmVudFRpbWU7XHJcbiAgICAgIHByb2dyZXNzLnZhbHVlID0gMTAwICogYy9kO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdmlkZW9SZXdpbmQoKSB7XHJcbiAgICAgIGxldCB3ID0gdGhpcy5vZmZzZXRXaWR0aDtcclxuICAgICAgbGV0IG8gPSBldmVudC5vZmZzZXRYO1xyXG4gICAgICB0aGlzLnZhbHVlID0gMTAwICogby93O1xyXG4gICAgICB2aWRlby5wYXVzZSgpO1xyXG4gICAgICB2aWRlby5jdXJyZW50VGltZSA9IHZpZGVvLmR1cmF0aW9uKiAoby93KTtcclxuICAgICAgdmlkZW8ucGxheSgpO1xyXG4gICAgfVxyXG59KVxyXG4iXX0=

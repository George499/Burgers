"use strict";var menu__item=document.querySelectorAll("#menu__item"),menu=document.querySelector(".menu");menu.addEventListener("click",function(e){for(var t=0;t<menu__item.length;t++)menu__item[t].classList.remove("menu__item--active")});for(var _loop=function(n){menu__item[n].addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),menu__item[n].classList.contains("menu__item--active"))menu__item[n].classList.remove("menu__item--active");else{for(var t=0;t<menu__item.length;t++)menu__item[t].classList.remove("menu__item--active");menu__item[n].classList.add("menu__item--active")}})},i=0;i<menu__item.length;i++)_loop(i);var left=document.querySelector(".scrollarrow--left"),right=document.querySelector(".scrollarrow--right"),sliderList=document.querySelector(".slider__list"),slides=document.querySelectorAll(".slider__item"),computed=getComputedStyle(sliderList);right.addEventListener("click",function(e){e.preventDefault();var t=parseInt(computed.left);sliderList.style.left=-1880<t?t-940+"px":t+3760+"px"}),left.addEventListener("click",function(e){e.preventDefault();var t=parseInt(computed.left);sliderList.style.left=t<1880?t+940+"px":t-3760+"px"});var team__item=document.querySelectorAll(".team__item"),team=document.querySelector(".team__people");team.addEventListener("click",function(e){e.preventDefault();for(var t=0;t<team__item.length;t++)team__item[t].classList.remove("team__item--active")});var _loop2=function(n){team__item[n].addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),team__item[n].classList.contains("team__item--active"))team__item[n].classList.remove("team__item--active");else{for(var t=0;t<team__item.length;t++)team__item[t].classList.remove("team__item--active");team__item[n].classList.add("team__item--active")}})};for(i=0;i<team__item.length;i++)_loop2(i);var header__menu__link=document.querySelector("#menulink"),hamburger__fullscreen=document.querySelector("#fullscreen");header__menu__link.addEventListener("click",function(){fullscreen.style.right="0"});var exit=document.querySelector("#exit");exit.addEventListener("click",function(e){e.preventDefault(),hamburger__fullscreen.style.right="-100%"});var reviews=document.querySelector(".reviews"),overlay=document.querySelector(".overlay"),popupText=document.querySelector(".overlay__text");reviews.addEventListener("click",function(e){var t=e.target;if("BUTTON"===t.tagName){var n=t.previousElementSibling.previousElementSibling.innerHTML+t.previousElementSibling.innerHTML;popupText.innerHTML=n,overlay.style.display="block",document.body.style.overflow="hidden"}document.addEventListener("keyup",function(e){"Escape"===e.key&&(overlay.style.display="none",document.body.style.overflow="inherit")}),document.querySelector(".overlay__exit").addEventListener("click",function(e){e.preventDefault(),overlay.style.display="none",document.body.style.overflow="inherit"})});var myForm=document.querySelector(".form__elem"),sendButton=document.querySelector(".btn--send");function validateForm(e){var t=!0;return validateField(myForm.elements.name)||(t=!1),validateField(myForm.elements.phone)||(t=!1),validateField(myForm.elements.comment)||(t=!1),t}function validateField(e){return e.nextElementSibling.textContent=e.validationMessage,e.checkValidity()}myForm.addEventListener("keydown",function(e){if("phone"==e.target.name||"apartment"==e.target.name||"floor"==e.target.name){var t=!1,n=!1;(0<=e.key||e.key<=9)&&(t=!0),"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Backspace"!=e.key||(n=!0),t||n||e.preventDefault()}}),sendButton.addEventListener("click",function(e){if(e.preventDefault(),validateForm(myForm)){myForm.elements.apartment.value,myForm.elements.building.value,myForm.elements.comment.value,myForm.elements.floor.value,myForm.elements.home.value,myForm.elements.name.value,myForm.elements.phone.value,myForm.elements.question1.checked,myForm.elements.question2.checked,myForm.elements.question3.checked,myForm.elements.street.value;var t=new FormData(myForm);t.append("name",myForm.elements.name.value),t.append("phone",myForm.elements.phone.value),t.append("comment",myForm.elements.comment.value),t.append("to","gi.32@gmail.com");var n=new XMLHttpRequest;n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.send(t),n.responseType="json",n.addEventListener("load",function(){if(n.response.status){var t=document.querySelector(".overlay--modal");t.style.display="block",document.body.style.overflow="hidden",document.querySelector(".overlay__text--modal").innerHTML="Заказ отправлен",myForm.reset(),document.addEventListener("keyup",function(e){"Escape"===e.key&&(t.style.display="none")}),document.querySelector(".overlay__exit--modal").addEventListener("click",function(e){e.preventDefault(),t.style.display="none",document.body.style.overflow="inherit"})}})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIm1lbnVfX2l0ZW0iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtZW51IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiaSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImxlbmd0aCIsImFkZCIsIl9sb29wIiwibGVmdCIsInJpZ2h0Iiwic2xpZGVyTGlzdCIsInNsaWRlcyIsImNvbXB1dGVkIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInByZXZlbnREZWZhdWx0IiwiY3VycmVudExlZnQiLCJwYXJzZUludCIsInRlYW1fX2l0ZW0iLCJ0ZWFtIiwic3RvcFByb3BhZ2F0aW9uIiwiY29udGFpbnMiLCJfbG9vcDIiLCJoZWFkZXJfX21lbnVfX2xpbmsiLCJmdWxsc2NyZWVuIiwic3R5bGUiLCJoYW1idXJnZXJfX2Z1bGxzY3JlZW4iLCJleGl0IiwicmV2aWV3cyIsIm92ZXJsYXkiLCJwb3B1cFRleHQiLCJlbGVtIiwidGFyZ2V0IiwidGFnTmFtZSIsImlubmVySFRNTCIsIm1vZGFsVGV4dCIsImRpc3BsYXkiLCJib2R5Iiwib3ZlcmZsb3ciLCJrZXkiLCJteUZvcm0iLCJzZW5kQnV0dG9uIiwidmFsaWRhdGVGb3JtIiwiZm9ybSIsInZhbGlkIiwidmFsaWRhdGVGaWVsZCIsImVsZW1lbnRzIiwibmFtZSIsInBob25lIiwiY29tbWVudCIsImZpZWxkIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNoZWNrVmFsaWRpdHkiLCJpc0NvbnRyb2wiLCJidWlsZGluZyIsInF1ZXN0aW9uMyIsInN0cmVldCIsImZvcm1EYXRhIiwiaG9tZSIsInZhbHVlIiwieGhyIiwiY2hlY2tlZCIsIkZvcm1EYXRhIiwiYXBwZW5kIiwib3BlbiIsInNlbmQiLCJyZXNwb25zZVR5cGUiLCJvdmVybGF5Rm9ybSIsInJlc3BvbnNlIiwic3RhdHVzIiwib3ZlcmxheUV4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QWEsU0FBQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBtZW51X19pdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNtZW51X19pdGVtXCIpO1xyXG5sZXQgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudVwiKTtcclxuXHJcbm1lbnUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuZm9yIChsZXQgaSA9IDA7IGkgPCBtZW51X19pdGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBtZW51X19pdGVtIFtpXS5jbGFzc0xpc3QucmVtb3ZlKFwibWVudV9faXRlbS0tYWN0aXZlXCIpO1xyXG59XHJcbn0pXHJcblxyXG5mb3IgKGxldCBpID0gMDsgaSA8IG1lbnVfX2l0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgIG1lbnVfX2l0ZW1baV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAobWVudV9faXRlbVtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnVfX2l0ZW0tLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIG1lbnVfX2l0ZW1baV0uY2xhc3NMaXN0LnJlbW92ZShcIm1lbnVfX2l0ZW0tLWFjdGl2ZVwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZW51X19pdGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG1lbnVfX2l0ZW1baV0uY2xhc3NMaXN0LnJlbW92ZSgnbWVudV9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWVudV9faXRlbVtpXS5jbGFzc0xpc3QuYWRkKCdtZW51X19pdGVtLS1hY3RpdmUnKVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG5jb25zdCBsZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zY3JvbGxhcnJvdy0tbGVmdFwiKTtcclxuY29uc3QgcmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNjcm9sbGFycm93LS1yaWdodFwiKTtcclxuY29uc3Qgc2xpZGVyTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19saXN0XCIpO1xyXG5jb25zdCBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlcl9faXRlbVwiKTtcclxuY29uc3QgY29tcHV0ZWQgPSBnZXRDb21wdXRlZFN0eWxlKHNsaWRlckxpc3QpO1xyXG5cclxuXHJcbnJpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBsZXQgY3VycmVudExlZnQgPSBwYXJzZUludChjb21wdXRlZC5sZWZ0KVxyXG4gICAgICAgICBpZiAoY3VycmVudExlZnQgPiAtMTg4MCkge1xyXG4gICAgICAgIHNsaWRlckxpc3Quc3R5bGUubGVmdCA9IGN1cnJlbnRMZWZ0IC0gOTQwICsgXCJweFwiO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNsaWRlckxpc3Quc3R5bGUubGVmdCA9IGN1cnJlbnRMZWZ0ICsgOTQwKjQgKyBcInB4XCI7XHJcbiAgICAgICAgIH1cclxufSk7XHJcbmxlZnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgbGV0IGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY29tcHV0ZWQubGVmdCkgICBcclxuICAgIGlmIChjdXJyZW50TGVmdCA8IDE4ODApICB7ICAgIFxyXG4gICAgc2xpZGVyTGlzdC5zdHlsZS5sZWZ0ID0gY3VycmVudExlZnQgKyA5NDAgKyBcInB4XCI7ICAgICAgICBcclxufVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgc2xpZGVyTGlzdC5zdHlsZS5sZWZ0ID0gY3VycmVudExlZnQgLSA5NDAqNCArIFwicHhcIjtcclxuICAgIH1cclxuXHJcbn0pXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmxldCB0ZWFtX19pdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50ZWFtX19pdGVtXCIpO1xyXG5sZXQgdGVhbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVhbV9fcGVvcGxlXCIpO1xyXG5cclxuXHJcbnRlYW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVhbV9faXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRlYW1fX2l0ZW1baV0uY2xhc3NMaXN0LnJlbW92ZShcInRlYW1fX2l0ZW0tLWFjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVhbV9faXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRlYW1fX2l0ZW1baV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRlYW1fX2l0ZW1baV0uY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZWFtX19pdGVtLS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgdGVhbV9faXRlbVtpXS5jbGFzc0xpc3QucmVtb3ZlKFwidGVhbV9faXRlbS0tYWN0aXZlXCIpICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZWFtX19pdGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgIHRlYW1fX2l0ZW1baV0uY2xhc3NMaXN0LnJlbW92ZSgndGVhbV9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0ZWFtX19pdGVtW2ldLmNsYXNzTGlzdC5hZGQoJ3RlYW1fX2l0ZW0tLWFjdGl2ZScpICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcblxyXG5sZXQgaGVhZGVyX19tZW51X19saW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZW51bGlua1wiKTtcclxubGV0IGhhbWJ1cmdlcl9fZnVsbHNjcmVlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZnVsbHNjcmVlblwiKTtcclxuaGVhZGVyX19tZW51X19saW5rLmFkZEV2ZW50TGlzdGVuZXIgKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgIGZ1bGxzY3JlZW4uc3R5bGUucmlnaHQgPSAnMCcgfVxyXG4pXHJcblxyXG5sZXQgZXhpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZXhpdFwiKTtcclxuXHJcbmV4aXQuYWRkRXZlbnRMaXN0ZW5lciAoXCJjbGlja1wiLCBmdW5jdGlvbihlKXsgICAgXHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBoYW1idXJnZXJfX2Z1bGxzY3JlZW4uc3R5bGUucmlnaHQgPSBcIi0xMDAlXCI7XHJcbn0gKVxyXG5cclxuY29uc3QgcmV2aWV3cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2aWV3c1wiKTtcclxuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxuY29uc3QgcG9wdXBUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5X190ZXh0XCIpO1xyXG5cclxuXHJcbnJldmlld3MuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGU9PiB7XHJcbiAgICBsZXQgZWxlbSA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKGVsZW0udGFnTmFtZSA9PT0gXCJCVVRUT05cIikgeyAgICAgICAgXHJcbiAgICAgICAgdmFyIG1vZGFsVGV4dCA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVySFRNTCArIGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZy5pbm5lckhUTUw7ICAgICAgICAgXHJcbiAgICAgICAgcG9wdXBUZXh0LmlubmVySFRNTCA9IG1vZGFsVGV4dDsgICAgICAgIFxyXG4gICAgICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBlID0+IHtcclxuICAgICAgICBsZXQga2V5TmFtZSA9IGUua2V5O1xyXG5cclxuICAgICAgICBpZihrZXlOYW1lID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaW5oZXJpdCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfSlcclxuICAgIGxldCBvdmVybGF5RXhpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheV9fZXhpdFwiKTtcclxuICAgIG92ZXJsYXlFeGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2luaGVyaXQnO1xyXG4gICAgfSlcclxufSk7XHJcblxyXG5cclxuXHJcbmNvbnN0IG15Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fZWxlbVwiKVxyXG5jb25zdCBzZW5kQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG4tLXNlbmRcIilcclxuXHJcbiAgICBcclxuICAgIG15Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBlID0+IHsgICAgXHJcbiAgICBpZiAoZS50YXJnZXQubmFtZSA9PSAncGhvbmUnICB8fCBlLnRhcmdldC5uYW1lID09ICdhcGFydG1lbnQnIHx8IGUudGFyZ2V0Lm5hbWUgPT0gJ2Zsb29yJyApIHtcclxuICAgIGxldCBpc0RpZ2l0ID0gZmFsc2U7XHJcbiAgICBsZXQgaXNEYXNoID0gZmFsc2U7XHJcbiAgICBsZXQgaXNDb250cm9sID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKGUua2V5ID49IDAgfHwgZS5rZXkgPD0gOSkge1xyXG4gICAgICAgIGlzRGlnaXQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBpZiAoZS5rZXkgPT0gXCJBcnJvd0xlZnRcIiB8fCBlLmtleSA9PSBcIkFycm93UmlnaHRcIiB8fCBlLmtleSA9PSBcIkJhY2tzcGFjZVwiKSB7XHJcbiAgICAgICAgaXNDb250cm9sID0gdHJ1ZVxyXG4gICAgfVxyXG4gICAgaWYgKCFpc0RpZ2l0ICYmICFpc0NvbnRyb2wpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcbiAgICB9XHJcbn0pXHJcblxyXG5cclxuXHJcbnNlbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciAoXCJjbGlja1wiLCBlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmICh2YWxpZGF0ZUZvcm0obXlGb3JtKSkgeyAgICAgXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgYXBhcnRtZW50OiBteUZvcm0uZWxlbWVudHMuYXBhcnRtZW50LnZhbHVlLFxyXG4gICAgICAgICAgICBidWlsZGluZzogbXlGb3JtLmVsZW1lbnRzLmJ1aWxkaW5nLnZhbHVlLFxyXG4gICAgICAgICAgICBjb21tZW50OiBteUZvcm0uZWxlbWVudHMuY29tbWVudC52YWx1ZSxcclxuICAgICAgICAgICAgZmxvb3I6IG15Rm9ybS5lbGVtZW50cy5mbG9vci52YWx1ZSxcclxuICAgICAgICAgICAgaG9tZTogbXlGb3JtLmVsZW1lbnRzLmhvbWUudmFsdWUsXHJcbiAgICAgICAgICAgIG5hbWU6IG15Rm9ybS5lbGVtZW50cy5uYW1lLnZhbHVlLFxyXG4gICAgICAgICAgICBwaG9uZTogbXlGb3JtLmVsZW1lbnRzLnBob25lLnZhbHVlLFxyXG4gICAgICAgICAgICBxdWVzdGlvbjE6IG15Rm9ybS5lbGVtZW50cy5xdWVzdGlvbjEuY2hlY2tlZCxcclxuICAgICAgICAgICAgcXVlc3Rpb24yOiBteUZvcm0uZWxlbWVudHMucXVlc3Rpb24yLmNoZWNrZWQsXHJcbiAgICAgICAgICAgIHF1ZXN0aW9uMzogbXlGb3JtLmVsZW1lbnRzLnF1ZXN0aW9uMy5jaGVja2VkLFxyXG4gICAgICAgICAgICBzdHJlZXQ6IG15Rm9ybS5lbGVtZW50cy5zdHJlZXQudmFsdWVcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKG15Rm9ybSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJuYW1lXCIsIG15Rm9ybS5lbGVtZW50cy5uYW1lLnZhbHVlKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZChcInBob25lXCIsIG15Rm9ybS5lbGVtZW50cy5waG9uZS52YWx1ZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJjb21tZW50XCIsIG15Rm9ybS5lbGVtZW50cy5jb21tZW50LnZhbHVlKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZChcInRvXCIsIFwiZ2kuMzJAZ21haWwuY29tXCIpOyBcclxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhoci5vcGVuKCdQT1NUJywgJ2h0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbCcpO1xyXG4gICAgeGhyLnNlbmQoZm9ybURhdGEpOyBcclxuICAgIHhoci5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcclxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgIFxyXG4gICAgICAgIGlmICh4aHIucmVzcG9uc2Uuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBvdmVybGF5Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheS0tbW9kYWxcIik7XHJcbiAgICAgICAgICAgIG92ZXJsYXlGb3JtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgbGV0IHBvcHVwVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheV9fdGV4dC0tbW9kYWxcIilcclxuICAgICAgICAgICAgcG9wdXBUZXh0LmlubmVySFRNTCA9IFwi0JfQsNC60LDQtyDQvtGC0L/RgNCw0LLQu9C10L1cIjsgICAgXHJcbiAgICAgICAgICAgIG15Rm9ybS5yZXNldCgpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBrZXlOYW1lID0gZS5rZXk7ICAgICAgICBcclxuICAgICAgICAgICAgaWYoa2V5TmFtZSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICBvdmVybGF5Rm9ybS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgICAgICBsZXQgb3ZlcmxheUV4aXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfX2V4aXQtLW1vZGFsXCIpO1xyXG4gICAgICAgIG92ZXJsYXlFeGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgb3ZlcmxheUZvcm0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdpbmhlcml0JztcclxuICAgICAgICB9KVxyXG4gICAgfSBcclxuICAgIH0pXHJcbiAgICB9XHJcbn0pO1xyXG4gICAgZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pIHtcclxuICAgICAgICBsZXQgdmFsaWQgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgaWYoIXZhbGlkYXRlRmllbGQobXlGb3JtLmVsZW1lbnRzLm5hbWUpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYoIXZhbGlkYXRlRmllbGQobXlGb3JtLmVsZW1lbnRzLnBob25lKSkge1xyXG4gICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmKCF2YWxpZGF0ZUZpZWxkKG15Rm9ybS5lbGVtZW50cy5jb21tZW50KSkge1xyXG4gICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIHJldHVybiB2YWxpZDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gdmFsaWRhdGVGaWVsZChmaWVsZCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBmaWVsZC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkLmNoZWNrVmFsaWRpdHkoKTsgXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICBcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBcclxuICAgICJdfQ==
